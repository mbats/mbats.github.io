<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Eclipse, modeling and other things">

    <title>The tree layout secret - MelBlog</title>

    <link rel="canonical" href="http://melb.enix.org/2015/03/04/the-tree-layout-secret/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://melb.enix.org/feed.xml" title="MelBlog" />

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">MelBlog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
				
                <li>
                    <a href="/about/">About</a>
                </li>
				
                
				
                <li>
                    <a href="/talks/">Talks and Papers</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/post-bg-01.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>The tree layout secret</h1>
                    
                    <span class="meta">Posted by Mélanie Bats on March 4, 2015</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>A recurring problem when developing a graphical modeler is providing the right layout. The advantage with Sirius is it provides you with a default algorithm that performs an automatic layout of all the elements on a diagram. To illustrate the Sirius’ layout capabilities imagine that we want to visualize the hierarchy of characters in the US TV series <a href="http://en.wikipedia.org/wiki/House_of_Cards_(U.S._TV_series)">House Of Cards</a>. To do this we define the following metamodel: <img src="https://github.com/mbats/sirius-blog/blob/master/tree-layout/blog/images/metamodel.png?raw=true" alt="" /> First, we used Sirius to create a diagram representing the <code class="language-plaintext highlighter-rouge">Persons</code>. <img src="https://github.com/mbats/sirius-blog/blob/master/tree-layout/blog/images/persons.png?raw=true" alt="" /> Each person is represented by a white square with his or her name on it. <img src="https://github.com/mbats/sirius-blog/blob/master/tree-layout/blog/images/flat.png?raw=true" alt="" /> By default Sirius lays out nodes from left to right and what we now have is a flat diagram, with each person on exactly the same level. However what we want to see is the White House organizational hierarchy so we need to represent the subordination link. This link is modeled using the <code class="language-plaintext highlighter-rouge">dependsOn</code> reference in the metamodel. Second we define a new <code class="language-plaintext highlighter-rouge">relation based edge</code> mapping. This edge will connect <code class="language-plaintext highlighter-rouge">Persons</code>, and to find the subordinate we just use the <code class="language-plaintext highlighter-rouge">dependsOn</code> reference. <img src="https://github.com/mbats/sirius-blog/blob/master/tree-layout/blog/images/dependsOn.png?raw=true" alt="" /> The default layout will automatically present an ordered tree diagram of the White House hierarchy with president Garrett Walker at the top of the diagram and Congressman Peter Russo at the bottom. When you define a relation based edge, Sirius then automatically lays out the elements as an ordered tree diagram by using the <code class="language-plaintext highlighter-rouge">dependsOn</code> reference to find the children. <img src="https://github.com/mbats/sirius-blog/blob/master/tree-layout/blog/images/hierarchy.png?raw=true" alt="" /> That looks all very well and good. However, supposing that now we want to retain and be able to view our subordination link but also order our nodes according to a different relation. In our metamodel we add another reference <code class="language-plaintext highlighter-rouge">influences</code> that represents the influence one person can exert over another. We need to create another kind of diagram with the most influencial person at the top and the most influenced person at the bottom whilst still retaining the former subordination links between the persons. Great news! This is really easy to implement with Sirius! If the Sirius default algorithm does not fit your particular needs, you can configure some of the parameters or request alternative algorithms directly within the Sirius specification editor. You can define either of:</p>

<ul>
  <li>A <em>Composite Layout</em> : this must be used to show containment relations. It enables you to specify padding between the different elements and the direction for the default algorithm.</li>
  <li>An <em>Ordered Tree Layout</em> : this must be used so as to lay nodes as an ordered tree.</li>
</ul>

<p>These layout algorithms manage only nodes connected by edges, other nodes are lay out from left to right as usual. The <strong>Ordered Tree Layout</strong> is what we need for our case. We defined a new <code class="language-plaintext highlighter-rouge">Influence</code> diagram with a <code class="language-plaintext highlighter-rouge">Person</code> mapping and a <code class="language-plaintext highlighter-rouge">DependsOn</code> mapping. These mappings are exactly the same as with the <code class="language-plaintext highlighter-rouge">Hierarchy</code> diagram. The only difference being that we have produced an Ordered Tree Layout. <img src="https://github.com/mbats/sirius-blog/blob/master/tree-layout/blog/images/influenceHierarchy.png?raw=true" alt="" /> The <code class="language-plaintext highlighter-rouge">Children Expression</code> is used to specify how to retrieve children for each node. In our example we use the <code class="language-plaintext highlighter-rouge">influences</code> reference to progress through the model. Your <code class="language-plaintext highlighter-rouge">Node Mapping</code> must specify the mapping that the tree order algorithm is to operate on. In our example we want the algorithm to operate on <code class="language-plaintext highlighter-rouge">Person</code>. Note: the ordered tree layout only works if you have only defined a single kind of node mapping in your diagram specification. And… Ta-daaah! By defining this new layout you can see the person influencing every other player in the White House is… Frank Underwood, but Shh! That’s a secret ;) <img src="https://github.com/mbats/sirius-blog/blob/master/tree-layout/blog/images/influence.png?raw=true" alt="" /> Finally, if you need to go further, you can also provide your <a href="http://www.eclipse.org/sirius/doc/developer/extensions-provide_custom-arrange-all.html">own layout algorithm programmatically</a>. The sample code from this example is available on github : <a href="https://github.com/mbats/sirius-blog/tree/master/tree-layout">https://github.com/mbats/sirius-blog/tree/master/tree-layout</a></p>


                <hr>

                <ul class="pager">
                    
                    
                    <li class="next">
                        <a href="/2015/03/19/customize-diagrams-with-images/" data-toggle="tooltip" data-placement="top" title="Customize diagrams with images">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/melaniebats">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/mbats">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.linkedin.com/in/mélanie-bats-bb9a192b">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:melanie.bats@obeo.fr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Mélanie Bats 2022</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


    
</body>

</html>
