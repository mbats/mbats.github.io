<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Eclipse, modeling and other things">

    <title>Customize diagrams with images - MelBlog</title>

    <link rel="canonical" href="http://melb.enix.org/2015/03/19/customize-diagrams-with-images/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://melb.enix.org/feed.xml" title="MelBlog" />

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">MelBlog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
				
                <li>
                    <a href="/about/">About</a>
                </li>
				
                
				
                <li>
                    <a href="/talks/">Talks and Papers</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/post-bg-01.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Customize diagrams with images</h1>
                    
                    <span class="meta">Posted by Mélanie Bats on March 19, 2015</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>Continuing from the example of our <a href="http://melb.enix.org/sirius/the-tree-layout-secret">previous blog post</a> on House of Cards, we’ll see today how one can customize the elements of diagrams by using pictures.</p>

<h2 id="per-diagram-instance-customization">Per-diagram instance customization</h2>

<p>In a Sirius based editor, the style of each diagram element can be customized. This customization can be applied from:</p>

<ul>
  <li>the tool bar:</li>
</ul>

<p><img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/toolbar.png?raw=true" alt="" /></p>

<ul>
  <li>the <code class="language-plaintext highlighter-rouge">Appearance</code> tab of the property view:</li>
</ul>

<p><img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/appearance.png?raw=true" alt="" /></p>

<ul>
  <li>the <code class="language-plaintext highlighter-rouge">Diagram</code> menu:</li>
</ul>

<p><img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/diagram.png?raw=true" alt="" /></p>

<ul>
  <li>the contextual menu <code class="language-plaintext highlighter-rouge">Format</code>:</li>
</ul>

<p><img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/format.png?raw=true" alt="" /> The elements you can customize are:</p>

<ul>
  <li>container: background color, background style, border size, foreground color, label alignment, label size, label format and workspace image.</li>
  <li>node: border size, color, label alignment, format, position, size and workspace image.</li>
  <li>edge: the folding style, the color, the label alignment, format, position and size, the line and routing style, the size and the target and source arrow.</li>
</ul>

<p>If we set a workspace image on the <em>Influence</em> diagram resulting from the <a href="http://melb.enix.org/sirius/the-tree-layout-secret">tree layout blog post</a>, we are able to see Frank Underwood’s face instead of a simple white square. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/set_image_on_existing_diag.png?raw=true" alt="" /> These customizations can be reset using:</p>

<ul>
  <li>the <code class="language-plaintext highlighter-rouge">Reset style customization</code> button available in the <code class="language-plaintext highlighter-rouge">Appearance</code> tab of the property view :</li>
</ul>

<p><img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/appearance_reset.png?raw=true" alt="" /></p>

<ul>
  <li>in the diagram editor tool bar :</li>
</ul>

<p><img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/toolbar_reset.png?raw=true" alt="" /> Thanks to this feature each user can customize existing diagrams in any Sirius based modeler. The problem with this solution is that if you create another diagram, the default style will be applied, and we would no longer see Frank’s beautiful face. This method is only useful to customize a specific instance of a diagram.</p>

<h2 id="using-workspace-image-style">Using workspace image style</h2>

<p>If instead of having customization specific to a given instance, we would like all diagrams of a certain type, what we need to do is to provide the image during the diagram specification phase. In order to get the image on every new diagram, we need to provide it at the diagram specification phase. To do so, after reopening the <code class="language-plaintext highlighter-rouge">houseofcards.odesign</code>, we need to update the <em>Influence</em> diagram description to use a workspace image in a conditional style to represent Frank. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/conditional_styles_specification.png?raw=true" alt="" /> From now on, everytime an <em>Influence</em> diagram is created, Frank’s and Linda’s faces will automatically be associated to the relevant diagram elements. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/conditional_styles.png?raw=true" alt="" /> What is problematic with this solution is that we need to create a conditional style for each character. As there are around 50 different characters in the House of Cards series, it is not a very practical solution.</p>

<h2 id="specify-style-custom-images">Specify style custom images</h2>

<p>Fortunately, Sirius provides another way to achieve that. We want to provide all the images in a specific folder and have Sirius select the right one according to the picture’s name. This can easily be done by using the <code class="language-plaintext highlighter-rouge">style customizations</code>. We modify our mapping to specify a workspace image style. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_mapping.png?raw=true" alt="" /> We provide a new style customization: <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_specification.png?raw=true" alt="" /> And a new property customization by expression: <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_property_specification.png?raw=true" alt="" /> All the pictures are stored in an <code class="language-plaintext highlighter-rouge">images</code> folder. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_design_images.png?raw=true" alt="" /> Then we specify that the style to customize is the workspace image previously defined. This style customization must be applied on <code class="language-plaintext highlighter-rouge">PersonWorkspaceImage</code> and we want to customize the <code class="language-plaintext highlighter-rouge">workspacePath</code> property: <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_property_specification2.png?raw=true" alt="" /> To retrieve the value of the <code class="language-plaintext highlighter-rouge">workspacePath</code>, we call a Java service <code class="language-plaintext highlighter-rouge">getImage</code> which returns the image path from the person name: <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_java.png?raw=true" alt="" /> Finally, when we reopen our example, we get a shinier diagram this time with everybody associated to his picture. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_property.png?raw=true" alt="" /> And now if I update the name of a character, I get automatically the associated picture. John Doe is represented by the default image and we see Zoe’s lovely face. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/style_custo_update_name.png?raw=true" alt="" /> With the next Sirius 3.0 version, if you use images with a transparent background, the edges will follow the image. <img src="https://github.com/mbats/sirius-blog/blob/master/custo-diag/blog/images/Sirius_3_0_Edges_And_Transparency.png?raw=true" alt="" /> The sample code from this example is available on github: <a href="https://github.com/mbats/sirius-blog/tree/master/custo-diag" title="https://github.com/mbats/sirius-blog/tree/master/custo-diag">https://github.com/mbats/sirius-blog/tree/master/custo-diag</a></p>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/03/04/the-tree-layout-secret/" data-toggle="tooltip" data-placement="top" title="The tree layout secret">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2015/04/07/keyboard-shortcuts/" data-toggle="tooltip" data-placement="top" title="Keyboard shortcuts">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/melaniebats">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/mbats">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.linkedin.com/in/mélanie-bats-bb9a192b">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:melanie.bats@obeo.fr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Mélanie Bats 2022</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


    
</body>

</html>
