<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Eclipse, modeling and other things">

    <title>I am your container - MelBlog</title>

    <link rel="canonical" href="http://melb.enix.org/2015/04/30/i-am-your-container/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://melb.enix.org/feed.xml" title="MelBlog" />

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">MelBlog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
				
                <li>
                    <a href="/about/">About</a>
                </li>
				
                
				
                <li>
                    <a href="/talks/">Talks and Papers</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/post-bg-01.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>I am your container</h1>
                    
                    <h2 class="subheading">Darth Sirius</h2>
                    
                    <span class="meta">Posted by Mélanie Bats on April 30, 2015</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>Continuing the <a href="http://www.eclipse.org/sirius/">Sirius</a> blog <a href="http://melb.enix.org/category/sirius/">posts series</a>, today we will see a small tip: how to create artificial containers in your diagram?</p>

<p>One of the main advantage of Sirius is that the graphical representations are independent from the metamodel’s structure. This means that you can choose to not respect the containment hierarchy of your model when you display it graphically. This is possible thanks to Sirius being based on <a href="http://www.eclipse.org/sirius/doc/specifier/general/Writing_Queries.html">queries</a>.</p>

<p>In the following example, we define a metamodel of a family:<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/Metamodel.png" alt="" /></p>

<p>To begin with, we define a <em>Flat</em> diagram, which displays all the members of the family at the same level:<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/Flat_VSM.png" alt="" /></p>

<p>In the <em>Person</em> mapping, we use the <em>Semantic Candidates Expression</em> to provide which semantic elements must be represented. These expressions returning model elements are called <a href="http://www.eclipse.org/sirius/doc/specifier/general/Writing_Queries.html">queries</a>. To write these queries, there are different languages provided by default in Sirius: specialized interpreters (<code class="language-plaintext highlighter-rouge">var</code>, <code class="language-plaintext highlighter-rouge">feature</code>, <code class="language-plaintext highlighter-rouge">service</code>), Acceleo, raw OCL or Java. Here, we use the <em>feature</em> interpreter to get for a family all the persons referenced by the <code class="language-plaintext highlighter-rouge">members</code> reference. You can easily identify <em>interpreted expressions</em> by their yellow background in the Properties tab of an element.</p>

<p>We create a first diagram which represents the flattened Skywalker family:<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/Flat.png" alt="" /></p>

<p>The next step is to add a level to model the <em>Family</em> as a container. We create a new <em>Family</em> diagram which contains a <em>Family</em> container mapping and a <em>Person</em> mapping as sub nodes:<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/Family_VSM.png" alt="" /></p>

<p>The <em>Family</em> diagram is created and all the members are represented inside the Skywalker container.<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/Family.png" alt="" /></p>

<p>Here we represent graphically the containment reference <code class="language-plaintext highlighter-rouge">members</code>. But what to do if we want to create an <em>artificial</em> container which does not exist in the metamodel as a containment reference?</p>

<p>Let’s see! Now imagine that we want to add a level to represent <a href="http://en.wikipedia.org/wiki/The_Force_(Star_Wars)">The Force</a> and if the person is related to the dark side or the light side. To do this we create a new <em>ForceSide</em> diagram:<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/ForceSide_VSM.png" alt="" /></p>

<p>We add a new container to represent the <em>DarkSide</em> of the force :<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/DarkSide_VSM.png" alt="" /></p>

<p>The dark side must be represented once for each family, the semantic candidate returns <em>var:self</em> which means the current family. As it should contain persons, it is defined as a <em>FreeForm</em> container.</p>

<p>We need to represent, in the Dark Side container, the persons that are from the dark side of the force. So we define a new sub node <em>Person</em> with the Semantic expression set to: <code class="language-plaintext highlighter-rouge">[self.members-&gt;select(p|p.oclAsType(Person).dark)/]</code><br />
This query returns all the members of a family and selects only the <em>Person</em> which has the attribute <code class="language-plaintext highlighter-rouge">dark</code> set to true.</p>

<p><img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/Sith_VSM.png" alt="" /></p>

<p>Then we reuse the <em>Person</em> mapping to represent the person in its force side container.</p>

<p>Finally, we do the same for the light side of the force and we create a <code class="language-plaintext highlighter-rouge">LightSide</code> container and the <code class="language-plaintext highlighter-rouge">Person</code> mapping to represent members of the family in this new container who are influenced by the light side: <code class="language-plaintext highlighter-rouge">[not self.members-&gt;select(p|p.oclAsType(Person).dark)/]</code><br />
A new <code class="language-plaintext highlighter-rouge">ForceSide</code> diagram is created in the Skywalker family and we discover that only Darth Vader is from the dark side of the force and that his children are driven by the light side of the force.<br />
<img src="https://raw.githubusercontent.com/mbats/sirius-blog/master/artificial-container/blog/images/ForceSide.png" alt="" /></p>

<p>Thanks to the queries in Sirius, it is easy to create artificial containers which are not related to containment referencers in the metamodel.</p>

<p><em>“May the <strong>Sirius</strong> Force be with you”</em> <img src="http://melb.enix.org/wp-includes/images/smilies/icon_wink.gif" alt=";)" /></p>

<p>The sample code from this example is available on github: <a href="https://github.com/mbats/sirius-blog/tree/master/artificial-container">https://github.com/mbats/sirius-blog/tree/master/artificial-container</a></p>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/04/15/interpolated-colors/" data-toggle="tooltip" data-placement="top" title="Refine diagrams with interpolated colors">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2015/05/13/unravelling-the-container/" data-toggle="tooltip" data-placement="top" title="Unravelling the container ">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/melaniebats">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/mbats">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.linkedin.com/in/mélanie-bats-bb9a192b">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:melanie.bats@obeo.fr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Mélanie Bats 2022</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


    
</body>

</html>
